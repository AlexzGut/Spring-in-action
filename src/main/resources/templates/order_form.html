<!DOCTYPE html>
<html lang="en"
      xmlns="http:/ /www.w3.org/1999/xhtml"
      xmlns:th="http:/ /www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Yummy Cakes</title>
</head>
<body>
<!-- In Thymeleaf you bing an object to an HTML form using the th:object attribute-->
<form method="POST" th:action="@{/orders}" th:object="${cakeOrder}">
  <h1>Order your Cakes</h1>

  <h3>Your Cake in this order</h3>
  <!-- @{} creates a link to /design, relative to the application's context path -->
  <a th:href="@{/create}" id="another">Create another cake</a><br>
  <ul>
    <li th:each="cake : ${cakeOrder.cakes}">
      <span th:text="${cake.name}"></span>
    </li>
  </ul>

  <h3>Deliver my cake to:</h3>
  <label for="deliveryName">Name: </label>
  <!-- The *{} operator in Thymeleaf is a context-relative variable expression used with form-bound objects
       *{} simplifies referencing the fields of the object specified by the th:object attribute of the form element. -->
  <input type="text" th:field="*{deliveryName}">
  <!-- th:if evaluates an expression, if true the <span> element will be display.
       The # prefix distinguishes Thymeleaf utility objects
       #fields.hasErrors('deliveryName') checks if the specified field has validation errors
       th:errors will display the error message for the specified field -->
  <span class="validationErrors" th:if="${#fields.hasErrors('deliveryName')}" th:errors="*{deliveryName}"></span>
  <br>

  <label for="deliveryStreet">Street address: </label>
  <input type="text" th:field="*{deliveryStreet}">
  <span class="validationErrors" th:if="${#fields.hasErrors('deliveryStreet')}" th:errors="*{deliveryStreet}"></span>
  <br>

  <label for="deliveryCity">City: </label>
  <input type="text" th:field="*{deliveryCity}">
  <span class="validationErrors" th:if="#{fields.hasErrors('deliveryCity')}" th:errors="*{deliveryCity}"></span>
  <br>

  <label for="deliveryState">State: </label>
  <input type="text" th:field="*{deliveryState}">
  <span class="validationErrors" th:if="#{fields.hasErrors('deliveryState')}" th:errors="*{deliveryState}"></span>
  <br>

  <label for="deliveryPostal">Postal Code: </label>
  <input type="text" th:field="*{deliveryPostal}">
  <span class="validationErrors" th:if="#{fields.hasErrors('deliveryPostal')}" th:errors="*{deliveryPostal}"></span>
  <br>

  <h3>Credit card information</h3>
  <label for="ccNumber">Credit card: </label>
  <input type="text" th:field="*{ccNumber}">
  <span class="validationErrors" th:if="#{fields.hasErrors('ccNumber')}" th:errors="*{ccNumber}"></span>
  <br>

  <label for="ccExpiration">Expiration Date: </label>
  <input type="text" th:field="*{ccExpiration}">
  <span class="validationErrors" th:if="#{fields.hasErrors('ccExpiration')}" th:errors="*{ccExpiration}"></span>
  <br>

  <label for="ccCVV">CVV: </label>
  <input type="text" th:field="*{ccCVV}">
  <span class="validationErrors" th:if="#{fields.hasErrors('ccCVV')}" th:errors="*{ccCVV}"></span>
  <br>

  <input type="submit" value="Submit Order">
</form>
</body>
</html>